<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.Like">
	<resultMap id="LikeResult" type="LikeVO">
		<result property="lno" column="rno" />
		<result property="bno" column="bno" />
		<result property="like_type" column="like_type" />
		<result property="bad_type" column="bad_type" />
	</resultMap>

<!-- 좋아요 누르기 -->
<insert id="LikeUp">
	<![CDATA[
		insert into heart
		values((select nvl(max(lno)+1,1)from heart), #{bno}, #{like_type}, #{bad_type} )
	]]>
</insert>
<!-- 좋아요 취소 -->
<delete id="LikeDown">
	<![CDATA[
		delete from heart
		where bno = #{bno} and like_type = #{like_type}
	]]>
</delete>
<!-- 좋아요 확인 -->
<select id="findLike" resultType="int">
	<![CDATA[
		select count(*) from heart
		where bno = #{bno} and like_type = 1
	]]>
</select>
<!-- 좋아요 갯수 -->
<select id="getLike" resultType="int">
	<![CDATA[
		select count(*) from heart
		where bno = #{bno} and like_type = #{like_type}
	]]>
</select>

<!-- 싫어요 누르기 -->
<insert id="BadUp">
	<![CDATA[
		insert into heart
		values((select nvl(max(lno)+1,1)from heart), #{bno}, #{like_type} , #{bad_type} )
	]]>
</insert>
<!-- 싫어요 취소 -->
<delete id="BadDown">
	<![CDATA[
		delete from heart
		where bno = #{bno} and bad_type = #{bad_type}
	]]>
</delete>
<!-- 싫어요 확인 -->
<select id="findBad" resultType="int">
	<![CDATA[
		select count(*) from heart
		where bno = #{bno} and bad_type  = 1
	]]>
</select>

</mapper>